(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5331:(e,t,r)=>{Promise.resolve().then(r.bind(r,9809))},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},9809:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),n=r(2115),a=r(6046),o=r(2649),i=r(4469);function c(){let[e,t]=(0,n.useState)(""),[r,c]=(0,n.useState)(""),{isLoading:u,startLoading:l,stopLoading:d}=(0,i.M3)(),{error:h,setError:m,clearError:p}=(0,i.qz)(),g=(0,a.useRouter)(),v=async t=>{if(t.preventDefault(),p(),!e.trim()||!r.trim()){m("Usuario y contrase\xf1a son requeridos");return}l();try{let t=await (0,o.iD)(e,r);t.id?(localStorage.setItem(o.vQ.session.storageKey,JSON.stringify(t)),g.push("/dashboard")):m("Credenciales inv\xe1lidas")}catch(e){m((0,o.u1)(e))}finally{d()}};return(0,s.jsxs)("div",{className:"form-container",children:[(0,s.jsxs)("div",{className:"logo-section",children:[(0,s.jsx)("h1",{children:"Inventario Municipio"}),(0,s.jsx)("p",{children:"Sistema de Gesti\xf3n de Equipos"})]}),(0,s.jsxs)("form",{onSubmit:v,className:"login-form",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"username",children:"Usuario:"}),(0,s.jsx)("input",{id:"username",type:"text",placeholder:"Ingrese su usuario",value:e,onChange:e=>t(e.target.value),disabled:u,autoComplete:"username",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a:"}),(0,s.jsx)("input",{id:"password",type:"password",placeholder:"Ingrese su contrase\xf1a",value:r,onChange:e=>c(e.target.value),disabled:u,autoComplete:"current-password",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]}),h&&(0,s.jsx)("div",{className:"error-message",role:"alert",children:h})]})}},4469:(e,t,r)=>{"use strict";r.d(t,{M3:()=>n,qz:()=>a});var s=r(2115);function n(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,r]=(0,s.useState)(e);return{isLoading:t,startLoading:()=>r(!0),stopLoading:()=>r(!1),setLoading:r}}function a(){let[e,t]=(0,s.useState)(null);return{error:e,setError:e=>t(e),clearError:()=>t(null),hasError:!!e}}r(8860),r(2649)},2649:(e,t,r)=>{"use strict";r.d(t,{Dw:()=>l,iD:()=>c,ri:()=>u,u1:()=>h,vQ:()=>n});let s={BASE_URL:"http://localhost:5000",TIMEOUT:1e4},n={session:{storageKey:"inventario_user_session",tokenKey:"inventario_auth_token"}};class a extends Error{constructor(e,t){super(e),this.status=t,this.name="ApiError"}}class o{static getInstance(){return o.instance||(o.instance=new o),o.instance}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(s.BASE_URL).concat(e);try{let e=new AbortController,n=setTimeout(()=>e.abort(),s.TIMEOUT),o=await fetch(r,{headers:{"Content-Type":"application/json",Accept:"application/json",...t.headers},signal:e.signal,...t});if(clearTimeout(n),!o.ok)throw new a("Error ".concat(o.status,": ").concat(o.statusText),o.status);return o.json()}catch(e){if(e instanceof a)throw e;if(e instanceof DOMException&&"AbortError"===e.name)throw new a("Timeout: La petici\xf3n tard\xf3 demasiado");throw new a("Error de conexi\xf3n con el servidor")}}get(e,t){let r=t?"?"+new URLSearchParams(t).toString():"";return this.request("".concat(e).concat(r))}post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}delete(e){return this.request(e,{method:"DELETE"})}constructor(){}}let i=o.getInstance(),c=(e,t)=>i.post("/usuarios",{username:e,password:t}),u=()=>{localStorage.removeItem(n.session.storageKey),localStorage.removeItem(n.session.tokenKey)},l=e=>{let t=e?Object.entries(e).filter(e=>{let[t,r]=e;return void 0!==r}).reduce((e,t)=>{let[r,s]=t;return{...e,[r]:String(s)}},{}):void 0;return i.get("/inventario",t)},d=e=>e instanceof a,h=e=>d(e)||e instanceof Error?e.message:"Error desconocido"},8860:(e,t,r)=>{"use strict";r.d(t,{Yq:()=>s});let s=e=>{try{let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)}catch(e){return"Fecha inv\xe1lida"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(5331)),_N_E=e.O()}]);